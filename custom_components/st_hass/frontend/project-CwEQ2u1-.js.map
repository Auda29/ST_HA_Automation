{"version":3,"file":"project-CwEQ2u1-.js","sources":["../../../frontend/src/project/types.ts","../../../frontend/src/project/project-storage.ts","../../../frontend/src/project/file-tree.ts","../../../frontend/src/project/project-explorer.ts"],"sourcesContent":["/**\r\n * Project Management Type Definitions\r\n */\r\n\r\n// ============================================================================\r\n// Project File\r\n// ============================================================================\r\n\r\nexport interface ProjectFile {\r\n  id: string; // Unique file identifier\r\n  name: string; // Display name (e.g., \"Kitchen_Light.st\")\r\n  path: string; // Virtual path in project (e.g., \"automations/kitchen.st\")\r\n  content: string; // ST program content\r\n  lastModified: number; // Timestamp\r\n  isOpen: boolean; // Whether file is currently open in editor\r\n  hasUnsavedChanges: boolean; // Whether file has unsaved changes\r\n}\r\n\r\n// ============================================================================\r\n// Project Structure\r\n// ============================================================================\r\n\r\nexport interface ProjectStructure {\r\n  id: string; // Project identifier\r\n  name: string; // Project display name\r\n  files: ProjectFile[]; // All files in the project\r\n  activeFileId: string | null; // Currently active/selected file\r\n  createdAt: number; // Project creation timestamp\r\n  lastModified: number; // Last modification timestamp\r\n}\r\n\r\n// ============================================================================\r\n// File Operations\r\n// ============================================================================\r\n\r\nexport interface FileOperation {\r\n  type: \"create\" | \"rename\" | \"delete\" | \"move\";\r\n  fileId: string;\r\n  newName?: string; // For rename\r\n  newPath?: string; // For move\r\n  content?: string; // For create\r\n}\r\n\r\n// ============================================================================\r\n// Storage Keys\r\n// ============================================================================\r\n\r\nexport const STORAGE_KEY_PROJECT = \"st_hass_project\";\r\nexport const STORAGE_KEY_DEFAULT_PROJECT = \"st_hass_default_project\";\r\n","/**\r\n * Project Storage Manager\r\n *\r\n * Handles persistence of project structure and file content using HA's storage API.\r\n * Falls back to localStorage for client-side caching.\r\n */\r\n\r\nimport type { ProjectStructure, ProjectFile } from \"./types\";\r\nimport { STORAGE_KEY_PROJECT } from \"./types\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport type HAConnection = any; // Home Assistant WebSocket connection\r\n\r\nexport class ProjectStorage {\r\n  constructor(\r\n    // Reserved for future HA storage API integration\r\n    _connection: HAConnection | null,\r\n    // Reserved for future HA storage API integration\r\n    _configEntryId: string,\r\n  ) {\r\n    // Connection and configEntryId stored for future HA storage API integration\r\n    void _connection;\r\n    void _configEntryId;\r\n  }\r\n\r\n  /**\r\n   * Load project structure from localStorage\r\n   * Note: HA storage API integration can be added later if needed\r\n   */\r\n  async loadProject(): Promise<ProjectStructure | null> {\r\n    // Use localStorage (consistent with existing schema storage)\r\n    const localData = localStorage.getItem(STORAGE_KEY_PROJECT);\r\n    if (localData) {\r\n      try {\r\n        const parsed = JSON.parse(localData);\r\n        return this._deserializeProject(parsed);\r\n      } catch (error) {\r\n        console.error(\"Failed to parse localStorage project data\", error);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Save project structure to localStorage\r\n   * Note: HA storage API integration can be added later if needed\r\n   */\r\n  async saveProject(project: ProjectStructure): Promise<void> {\r\n    const serialized = this._serializeProject(project);\r\n    localStorage.setItem(STORAGE_KEY_PROJECT, JSON.stringify(serialized));\r\n  }\r\n\r\n  /**\r\n   * Create a new project with default structure\r\n   */\r\n  createDefaultProject(): ProjectStructure {\r\n    const now = Date.now();\r\n    const defaultFile: ProjectFile = {\r\n      id: this._generateFileId(),\r\n      name: \"Main.st\",\r\n      path: \"Main.st\",\r\n      content: `{mode: restart}\r\nPROGRAM Main\r\nVAR\r\nEND_VAR\r\n\r\n(* Your ST code here *)\r\n\r\nEND_PROGRAM`,\r\n      lastModified: now,\r\n      isOpen: true,\r\n      hasUnsavedChanges: false,\r\n    };\r\n\r\n    return {\r\n      id: this._generateProjectId(),\r\n      name: \"My ST Project\",\r\n      files: [defaultFile],\r\n      activeFileId: defaultFile.id,\r\n      createdAt: now,\r\n      lastModified: now,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Migrate from single-file mode to project mode\r\n   */\r\n  migrateFromSingleFile(content: string): ProjectStructure {\r\n    const now = Date.now();\r\n    const file: ProjectFile = {\r\n      id: this._generateFileId(),\r\n      name: \"Main.st\",\r\n      path: \"Main.st\",\r\n      content,\r\n      lastModified: now,\r\n      isOpen: true,\r\n      hasUnsavedChanges: false,\r\n    };\r\n\r\n    return {\r\n      id: this._generateProjectId(),\r\n      name: \"My ST Project\",\r\n      files: [file],\r\n      activeFileId: file.id,\r\n      createdAt: now,\r\n      lastModified: now,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Serialize project for storage (exclude transient state)\r\n   */\r\n  private _serializeProject(project: ProjectStructure): unknown {\r\n    return {\r\n      id: project.id,\r\n      name: project.name,\r\n      files: project.files.map((file) => ({\r\n        id: file.id,\r\n        name: file.name,\r\n        path: file.path,\r\n        content: file.content,\r\n        lastModified: file.lastModified,\r\n        // Don't serialize isOpen and hasUnsavedChanges (transient state)\r\n      })),\r\n      activeFileId: project.activeFileId,\r\n      createdAt: project.createdAt,\r\n      lastModified: project.lastModified,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Deserialize project from storage\r\n   */\r\n  private _deserializeProject(data: unknown): ProjectStructure {\r\n    const parsed = data as {\r\n      id: string;\r\n      name: string;\r\n      files: Array<{\r\n        id: string;\r\n        name: string;\r\n        path: string;\r\n        content: string;\r\n        lastModified: number;\r\n      }>;\r\n      activeFileId: string | null;\r\n      createdAt: number;\r\n      lastModified: number;\r\n    };\r\n\r\n    return {\r\n      id: parsed.id,\r\n      name: parsed.name,\r\n      files: parsed.files.map((file) => ({\r\n        ...file,\r\n        isOpen: false, // Reset on load\r\n        hasUnsavedChanges: false, // Reset on load\r\n      })),\r\n      activeFileId: parsed.activeFileId,\r\n      createdAt: parsed.createdAt,\r\n      lastModified: parsed.lastModified,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generate unique file ID\r\n   */\r\n  private _generateFileId(): string {\r\n    return `file_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  /**\r\n   * Generate unique project ID\r\n   */\r\n  private _generateProjectId(): string {\r\n    return `project_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n}\r\n","/**\r\n * File Tree Component\r\n * \r\n * Displays project files in a tree structure with support for folders and file operations.\r\n */\r\n\r\nimport { LitElement, html, css } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport type { ProjectFile } from \"./types\";\r\n\r\ninterface FileTreeNode {\r\n  name: string;\r\n  path: string;\r\n  file?: ProjectFile;\r\n  children: Map<string, FileTreeNode>;\r\n  isFolder: boolean;\r\n}\r\n\r\n@customElement(\"st-file-tree\")\r\nexport class STFileTree extends LitElement {\r\n  @property({ type: Array }) declare files: ProjectFile[];\r\n  @property({ type: String }) declare activeFileId: string | null;\r\n  @property({ type: String }) declare selectedFileId: string | null;\r\n\r\n  @state() private _expandedPaths: Set<string>;\r\n  @state() private _editingFileId: string | null;\r\n  @state() private _editingName: string;\r\n\r\n  constructor() {\r\n    super();\r\n    this.files = [];\r\n    this.activeFileId = null;\r\n    this.selectedFileId = null;\r\n    this._expandedPaths = new Set();\r\n    this._editingFileId = null;\r\n    this._editingName = \"\";\r\n  }\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: block;\r\n      height: 100%;\r\n      overflow-y: auto;\r\n      font-size: 14px;\r\n    }\r\n    .file-tree {\r\n      padding: 8px;\r\n    }\r\n    .tree-node {\r\n      user-select: none;\r\n    }\r\n    .tree-item {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      padding: 4px 8px;\r\n      cursor: pointer;\r\n      border-radius: 4px;\r\n      transition: background-color 0.2s;\r\n    }\r\n    .tree-item:hover {\r\n      background-color: var(--divider-color, rgba(0, 0, 0, 0.1));\r\n    }\r\n    .tree-item.active {\r\n      background-color: var(--primary-color);\r\n      color: var(--text-primary-color);\r\n    }\r\n    .tree-item.selected {\r\n      background-color: var(--secondary-background-color);\r\n    }\r\n    .tree-toggle {\r\n      width: 16px;\r\n      height: 16px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      flex-shrink: 0;\r\n    }\r\n    .tree-toggle.expanded {\r\n      transform: rotate(90deg);\r\n    }\r\n    .tree-icon {\r\n      width: 16px;\r\n      height: 16px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      flex-shrink: 0;\r\n    }\r\n    .tree-icon ha-icon {\r\n      width: 16px;\r\n      height: 16px;\r\n    }\r\n    .tree-label {\r\n      flex: 1;\r\n      min-width: 0;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n    .tree-label.editing {\r\n      padding: 2px 4px;\r\n      border: 1px solid var(--primary-color);\r\n      border-radius: 2px;\r\n      background: var(--card-background-color);\r\n    }\r\n    .tree-label input {\r\n      width: 100%;\r\n      border: none;\r\n      outline: none;\r\n      background: transparent;\r\n      color: var(--primary-text-color);\r\n      font-size: 14px;\r\n    }\r\n    .tree-children {\r\n      margin-left: 16px;\r\n    }\r\n    .unsaved-indicator {\r\n      width: 6px;\r\n      height: 6px;\r\n      border-radius: 50%;\r\n      background-color: var(--warning-color, #ff9800);\r\n      flex-shrink: 0;\r\n    }\r\n    .context-menu {\r\n      position: fixed;\r\n      background: var(--card-background-color);\r\n      border: 1px solid var(--divider-color);\r\n      border-radius: 4px;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n      z-index: 1000;\r\n      min-width: 150px;\r\n    }\r\n    .context-menu-item {\r\n      padding: 8px 12px;\r\n      cursor: pointer;\r\n      font-size: 14px;\r\n    }\r\n    .context-menu-item:hover {\r\n      background-color: var(--divider-color);\r\n    }\r\n  `;\r\n\r\n  private _buildTree(): FileTreeNode {\r\n    const root: FileTreeNode = {\r\n      name: \"\",\r\n      path: \"\",\r\n      children: new Map(),\r\n      isFolder: true,\r\n    };\r\n\r\n    for (const file of this.files) {\r\n      const parts = file.path.split(\"/\");\r\n      let current = root;\r\n\r\n      for (let i = 0; i < parts.length; i++) {\r\n        const part = parts[i];\r\n        const isLast = i === parts.length - 1;\r\n\r\n        if (!current.children.has(part)) {\r\n          current.children.set(part, {\r\n            name: part,\r\n            path: parts.slice(0, i + 1).join(\"/\"),\r\n            children: new Map(),\r\n            isFolder: !isLast,\r\n          });\r\n        }\r\n\r\n        const node = current.children.get(part)!;\r\n        if (isLast) {\r\n          node.file = file;\r\n        }\r\n        current = node;\r\n      }\r\n    }\r\n\r\n    return root;\r\n  }\r\n\r\n  private _toggleExpand(path: string): void {\r\n    if (this._expandedPaths.has(path)) {\r\n      this._expandedPaths.delete(path);\r\n    } else {\r\n      this._expandedPaths.add(path);\r\n    }\r\n    this._expandedPaths = new Set(this._expandedPaths);\r\n    this.requestUpdate();\r\n  }\r\n\r\n  private _handleFileClick(file: ProjectFile, e: Event): void {\r\n    e.stopPropagation();\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-selected\", {\r\n        detail: { fileId: file.id },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _handleFileDoubleClick(file: ProjectFile, e: Event): void {\r\n    e.stopPropagation();\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-open\", {\r\n        detail: { fileId: file.id },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _handleContextMenu(file: ProjectFile, e: Event): void {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    // Context menu implementation would go here\r\n    // For now, just emit event\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-context-menu\", {\r\n        detail: { fileId: file.id, x: (e as MouseEvent).clientX, y: (e as MouseEvent).clientY },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _renderNode(node: FileTreeNode, depth: number = 0): unknown {\r\n    const isExpanded = this._expandedPaths.has(node.path);\r\n    const hasChildren = node.children.size > 0;\r\n\r\n    if (node.isFolder && node.path === \"\") {\r\n      // Root node - render children directly\r\n      const sortedChildren = Array.from(node.children.values()).sort((a, b) => {\r\n        if (a.isFolder !== b.isFolder) {\r\n          return a.isFolder ? -1 : 1; // Folders first\r\n        }\r\n        return a.name.localeCompare(b.name);\r\n      });\r\n\r\n      return html`\r\n        ${sortedChildren.map((child) => this._renderNode(child, depth))}\r\n      `;\r\n    }\r\n\r\n    if (node.isFolder) {\r\n      return html`\r\n        <div class=\"tree-node\">\r\n          <div\r\n            class=\"tree-item\"\r\n            @click=${() => this._toggleExpand(node.path)}\r\n          >\r\n            <div class=\"tree-toggle ${isExpanded ? \"expanded\" : \"\"}\">\r\n              ${hasChildren\r\n                ? html`<ha-icon icon=\"mdi:chevron-right\"></ha-icon>`\r\n                : html`<span style=\"width: 16px;\"></span>`}\r\n            </div>\r\n            <div class=\"tree-icon\">\r\n              <ha-icon icon=\"mdi:folder\"></ha-icon>\r\n            </div>\r\n            <div class=\"tree-label\">${node.name}</div>\r\n          </div>\r\n          ${isExpanded && hasChildren\r\n            ? html`\r\n                <div class=\"tree-children\">\r\n                  ${Array.from(node.children.values())\r\n                    .sort((a, b) => {\r\n                      if (a.isFolder !== b.isFolder) {\r\n                        return a.isFolder ? -1 : 1;\r\n                      }\r\n                      return a.name.localeCompare(b.name);\r\n                    })\r\n                    .map((child) => this._renderNode(child, depth + 1))}\r\n                </div>\r\n              `\r\n            : \"\"}\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    // File node\r\n    if (!node.file) return html``;\r\n\r\n    const isActive = node.file.id === this.activeFileId;\r\n    const isSelected = node.file.id === this.selectedFileId;\r\n    const isEditing = this._editingFileId === node.file.id;\r\n\r\n    return html`\r\n      <div class=\"tree-node\">\r\n        <div\r\n          class=\"tree-item ${isActive ? \"active\" : \"\"} ${isSelected\r\n            ? \"selected\"\r\n            : \"\"}\"\r\n          @click=${(e: Event) => this._handleFileClick(node.file!, e)}\r\n          @dblclick=${(e: Event) => this._handleFileDoubleClick(node.file!, e)}\r\n          @contextmenu=${(e: Event) => this._handleContextMenu(node.file!, e)}\r\n        >\r\n          <div class=\"tree-toggle\">\r\n            <span style=\"width: 16px;\"></span>\r\n          </div>\r\n          <div class=\"tree-icon\">\r\n            <ha-icon icon=\"mdi:file-code\"></ha-icon>\r\n          </div>\r\n          ${isEditing\r\n            ? html`\r\n                <div class=\"tree-label editing\">\r\n                  <input\r\n                    type=\"text\"\r\n                    .value=${this._editingName}\r\n                    @blur=${() => this._finishEditing(node.file!)}\r\n                    @keydown=${(e: KeyboardEvent) => {\r\n                      if (e.key === \"Enter\") {\r\n                        this._finishEditing(node.file!);\r\n                      } else if (e.key === \"Escape\") {\r\n                        this._cancelEditing();\r\n                      }\r\n                    }}\r\n                    @click=${(e: Event) => e.stopPropagation()}\r\n                  />\r\n                </div>\r\n              `\r\n            : html`<div class=\"tree-label\">${node.name}</div>`}\r\n          ${node.file.hasUnsavedChanges\r\n            ? html`<div class=\"unsaved-indicator\" title=\"Unsaved changes\"></div>`\r\n            : \"\"}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  private _finishEditing(file: ProjectFile): void {\r\n    if (this._editingName && this._editingName !== file.name) {\r\n      this.dispatchEvent(\r\n        new CustomEvent(\"file-rename\", {\r\n          detail: { fileId: file.id, newName: this._editingName },\r\n          bubbles: true,\r\n          composed: true,\r\n        }),\r\n      );\r\n    }\r\n    this._editingFileId = null;\r\n    this._editingName = \"\";\r\n  }\r\n\r\n  private _cancelEditing(): void {\r\n    this._editingFileId = null;\r\n    this._editingName = \"\";\r\n  }\r\n\r\n  startRename(fileId: string): void {\r\n    const file = this.files.find((f) => f.id === fileId);\r\n    if (file) {\r\n      this._editingFileId = fileId;\r\n      this._editingName = file.name;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const tree = this._buildTree();\r\n\r\n    return html`\r\n      <div class=\"file-tree\">\r\n        ${this._renderNode(tree)}\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n","/**\r\n * Project Explorer Component\r\n *\r\n * Main component for managing project structure, files, and operations.\r\n */\r\n\r\nimport { LitElement, html, css } from \"lit\";\r\nimport { customElement, property, state } from \"lit/decorators.js\";\r\nimport type { ProjectStructure, ProjectFile } from \"./types\";\r\nimport { ProjectStorage } from \"./project-storage\";\r\nimport \"./file-tree\";\r\n\r\n@customElement(\"st-project-explorer\")\r\nexport class STProjectExplorer extends LitElement {\r\n  @property({ attribute: false }) declare hass?: any;\r\n  @property({ type: Object }) declare project: ProjectStructure | null;\r\n\r\n  constructor() {\r\n    super();\r\n    this.project = null;\r\n  }\r\n\r\n  @state() private _storage: ProjectStorage | null = null;\r\n\r\n  static styles = css`\r\n    :host {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      background: var(--primary-background-color);\r\n    }\r\n    .header {\r\n      padding: 12px 16px;\r\n      border-bottom: 1px solid var(--divider-color);\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n    }\r\n    .header h3 {\r\n      margin: 0;\r\n      font-size: 16px;\r\n      font-weight: 500;\r\n      color: var(--primary-text-color);\r\n    }\r\n    .header-actions {\r\n      display: flex;\r\n      gap: 4px;\r\n    }\r\n    .header-button {\r\n      padding: 4px 8px;\r\n      border: none;\r\n      background: transparent;\r\n      color: var(--primary-text-color);\r\n      cursor: pointer;\r\n      border-radius: 4px;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 4px;\r\n      font-size: 12px;\r\n    }\r\n    .header-button:hover {\r\n      background-color: var(--divider-color);\r\n    }\r\n    .file-tree-container {\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n    .empty-state {\r\n      padding: 32px 16px;\r\n      text-align: center;\r\n      color: var(--secondary-text-color);\r\n      font-size: 14px;\r\n    }\r\n  `;\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this._initializeStorage();\r\n  }\r\n\r\n  updated(changedProperties: Map<string | number | symbol, unknown>): void {\r\n    super.updated(changedProperties);\r\n    if (changedProperties.has(\"hass\")) {\r\n      this._initializeStorage();\r\n    }\r\n  }\r\n\r\n  private _initializeStorage(): void {\r\n    if (this.hass?.connection) {\r\n      // Get config entry ID from hass (if available)\r\n      const configEntryId = this.hass.config?.entry_id || \"default\";\r\n      this._storage = new ProjectStorage(this.hass.connection, configEntryId);\r\n    } else {\r\n      this._storage = new ProjectStorage(null, \"default\");\r\n    }\r\n  }\r\n\r\n  private _handleNewFile(): void {\r\n    if (!this.project) return;\r\n\r\n    const newFile: ProjectFile = {\r\n      id: this._generateFileId(),\r\n      name: \"NewFile.st\",\r\n      path: \"NewFile.st\",\r\n      content: `{mode: restart}\r\nPROGRAM NewFile\r\nVAR\r\nEND_VAR\r\n\r\n(* Your ST code here *)\r\n\r\nEND_PROGRAM`,\r\n      lastModified: Date.now(),\r\n      isOpen: true,\r\n      hasUnsavedChanges: false,\r\n    };\r\n\r\n    // Dispatch file-created event so parent can update its project state first\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-created\", {\r\n        detail: { file: newFile },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _handleFileSelected(e: CustomEvent): void {\r\n    const { fileId } = e.detail;\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-selected\", {\r\n        detail: { fileId },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _handleFileOpen(e: CustomEvent): void {\r\n    const { fileId } = e.detail;\r\n    if (!this.project) return;\r\n\r\n    const updatedFiles = this.project.files.map((file) => ({\r\n      ...file,\r\n      isOpen: file.id === fileId || file.isOpen,\r\n    }));\r\n\r\n    const updatedProject: ProjectStructure = {\r\n      ...this.project,\r\n      files: updatedFiles,\r\n      activeFileId: fileId,\r\n      lastModified: Date.now(),\r\n    };\r\n\r\n    this._updateProject(updatedProject);\r\n\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"file-open\", {\r\n        detail: { fileId },\r\n        bubbles: true,\r\n        composed: true,\r\n      }),\r\n    );\r\n  }\r\n\r\n  private _handleFileRename(e: CustomEvent): void {\r\n    const { fileId, newName } = e.detail;\r\n    if (!this.project) return;\r\n\r\n    const updatedFiles = this.project.files.map((file) => {\r\n      if (file.id === fileId) {\r\n        return {\r\n          ...file,\r\n          name: newName,\r\n          path: newName, // Simple: path = name for now\r\n          lastModified: Date.now(),\r\n        };\r\n      }\r\n      return file;\r\n    });\r\n\r\n    const updatedProject: ProjectStructure = {\r\n      ...this.project,\r\n      files: updatedFiles,\r\n      lastModified: Date.now(),\r\n    };\r\n\r\n    this._updateProject(updatedProject);\r\n  }\r\n\r\n  private _updateProject(project: ProjectStructure): void {\r\n    this.project = project;\r\n    this._saveProject();\r\n    this.requestUpdate();\r\n  }\r\n\r\n  private async _saveProject(): Promise<void> {\r\n    if (!this._storage || !this.project) return;\r\n\r\n    try {\r\n      await this._storage.saveProject(this.project);\r\n    } catch (error) {\r\n      console.error(\"Failed to save project\", error);\r\n    }\r\n  }\r\n\r\n  private _generateFileId(): string {\r\n    return `file_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n\r\n  render() {\r\n    if (!this.project) {\r\n      return html`\r\n        <div class=\"empty-state\">\r\n          No project loaded. Create a new file to start.\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <div class=\"header\">\r\n        <h3>${this.project.name}</h3>\r\n        <div class=\"header-actions\">\r\n          <button\r\n            class=\"header-button\"\r\n            @click=${this._handleNewFile}\r\n            title=\"New File\"\r\n          >\r\n            <ha-icon icon=\"mdi:file-plus\"></ha-icon>\r\n            New\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"file-tree-container\">\r\n        <st-file-tree\r\n          .files=${this.project.files}\r\n          .activeFileId=${this.project.activeFileId}\r\n          @file-selected=${this._handleFileSelected}\r\n          @file-open=${this._handleFileOpen}\r\n          @file-rename=${this._handleFileRename}\r\n        ></st-file-tree>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n"],"names":["STORAGE_KEY_PROJECT","ProjectStorage","_connection","_configEntryId","localData","parsed","error","project","serialized","now","defaultFile","content","file","data","STFileTree","LitElement","__publicField","root","parts","current","i","part","isLast","node","path","e","depth","isExpanded","hasChildren","sortedChildren","a","b","html","child","isActive","isSelected","isEditing","fileId","f","tree","css","__decorateClass","property","state","customElement","STProjectExplorer","changedProperties","_a","configEntryId","_b","newFile","updatedFiles","updatedProject","newName"],"mappings":"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"}